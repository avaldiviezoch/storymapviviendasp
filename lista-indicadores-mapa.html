<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="utf-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1"/>
  <title>Panel de Indicadores • Enlaces a mapas</title>
  <style>
    :root{
      --brand:#0EA5A3;       /* turquesa de tus tarjetas */
      --brand-weak:#75d6d3;
      --ink:#0f172a;         /* texto */
      --muted:#6b7280;
      --bg:#ffffff;          /* fondo blanco para story */
      --card:#ffffff;
      --shadow:0 6px 20px rgba(2,6,23,.08);
      --radius:16px;
    }
    html,body{height:100%;margin:0;background:var(--bg);color:var(--ink);font-family:system-ui,Segoe UI,Inter,Arial}
    .wrap{
      display:grid; grid-template-columns: 420px 1fr; gap:20px;
      padding:22px; height:100%; box-sizing:border-box;
    }
    @media (max-width: 980px){
      .wrap{ grid-template-columns: 1fr; grid-auto-rows:min-content 1fr; }
    }

    /* Panel izquierdo */
    .accordion{
      background:var(--card); border-radius:var(--radius); box-shadow:var(--shadow); padding:16px;
    }
    .section{
      border:2px solid var(--brand); border-radius:14px; margin:12px 0; overflow:hidden; background:#fff;
    }
    .section summary{
      list-style:none; cursor:pointer; padding:14px 16px; font-weight:700; font-size:17px;
      display:flex; align-items:flex-start; gap:10px; position:relative;
    }
    .section summary::-webkit-details-marker{ display:none; }
    .section summary::after{
      content:"▾"; position:absolute; right:12px; top:12px; color:var(--brand);
      transition: transform .2s ease;
    }
    .section[open] summary::after{ transform: rotate(180deg); }

    .section .items{ padding:0 16px 10px 42px; }
    .item{
      display:block; padding:10px 10px; margin:4px 0; border-radius:10px; text-decoration:none;
      color:var(--ink); border:1px dashed transparent;
    }
    .item small{ color:var(--muted); }
    .item:hover{ background:#f8fffe; border-color:var(--brand-weak); }
    .item.active{ background:#e9fbfb; border-color:var(--brand); box-shadow: inset 0 0 0 1px var(--brand); }

    /* Visor (derecha) */
    .viewer{
      display:flex; flex-direction:column; gap:10px; min-height:0;
    }
    .viewer .headline{
      background:var(--card); border-left:6px solid var(--brand); border-radius:10px; padding:12px 14px;
      box-shadow:var(--shadow); font-weight:600;
    }
    .viewer .headline .sub{ color:var(--muted); font-weight:500; display:block; margin-top:4px }
    .viewer .frame{
      flex:1; min-height:320px; border-radius:14px; overflow:hidden; box-shadow:var(--shadow); background:#fff;
      border:1px solid #e5e7eb;
    }
    .viewer iframe{
      width:100%; height:100%; border:0; background:#fff;
    }

    /* Bullets a), b), c) */
    .bullet{
      display:inline-flex; align-items:center; justify-content:center;
      width:22px; height:22px; border-radius:999px; font-size:13px; font-weight:700;
      background:var(--brand); color:#fff; margin-right:8px;
      box-shadow:0 2px 0 rgba(0,0,0,.05);
    }
  </style>
</head>
<body>
  <div class="wrap">

    <!-- Panel izquierdo -->
    <div class="accordion" id="accordion">
      <!-- 1 -->
      <details class="section" open>
        <summary>1. Perú: Continuidad del servicio de agua por red pública en los hogares</summary>
        <div class="items">
          <a href="#" class="item" data-target="1a"><span class="bullet">a</span>Total</a>
          <a href="#" class="item" data-target="1b"><span class="bullet">b</span>Urbano</a>
          <a href="#" class="item" data-target="1c"><span class="bullet">c</span>Rural</a>
        </div>
      </details>

      <!-- 2 -->
      <details class="section">
        <summary>2. Perú: proporción de los hogares con continuidad del servicio de agua entre 20 y 24 horas promedio al día.</summary>
        <div class="items">
          <a href="#" class="item" data-target="2a"><span class="bullet">a</span>Total</a>
          <a href="#" class="item" data-target="2b"><span class="bullet">b</span>Urbano</a>
          <a href="#" class="item" data-target="2c"><span class="bullet">c</span>Rural</a>
        </div>
      </details>

      <!-- 3 -->
      <details class="section">
        <summary>3. Tiempo promedio en minutos en recoger agua (ida y vuelta)</summary>
        <div class="items">
          <a href="#" class="item" data-target="3a"><span class="bullet">a</span>Total</a>
          <a href="#" class="item" data-target="3b"><span class="bullet">b</span>Urbano</a>
          <a href="#" class="item" data-target="3c"><span class="bullet">c</span>Rural</a>
        </div>
      </details>
    </div>

    <!-- Visor derecho -->
    <div class="viewer">
      <div class="headline" id="headline">
        Texto texto Texto texto Texto texto Texto texto Texto texto Texto texto Texto texto Texto texto Texto texto
        <span class="sub" id="subline">Seleccione una opción del panel izquierdo…</span>
      </div>
      <div class="frame">
        <iframe id="mapFrame" title="Visor de mapas"></iframe>
      </div>
    </div>

  </div>

  <script>
    // Enlace único (para los 9 accesos)
    const MAP_URL = "https://pportalgis.vivienda.gob.pe/pportal/apps/experiencebuilder/experience/?id=a9b06f5c7d514907a252c283af22f69d&draft=true";

    const frame   = document.getElementById('mapFrame');
    const subline = document.getElementById('subline');
    const items   = [...document.querySelectorAll('.item')];

    // Texto amigable para el sub-título según el item
    function describe(target){
      // target viene como "1a", "2b", etc.
      const sec = target[0], opt = target[1];
      const optText = {a:'Total', b:'Urbano', c:'Rural'}[opt] || '';
      const titleBySec = {
        1: 'Continuidad del servicio de agua por red pública',
        2: 'Hogares con continuidad entre 20 y 24 horas/día',
        3: 'Tiempo promedio en recoger agua (ida y vuelta)'
      };
      return `${titleBySec[sec]} — ${optText}`;
    }

    function activate(el){
      items.forEach(i => i.classList.toggle('active', i === el));
      subline.textContent = describe(el.dataset.target);
      frame.src = MAP_URL; // mismo enlace para todos (según lo pedido)
    }

    // Click handlers
    items.forEach(it=>{
      it.addEventListener('click', (e)=>{
        e.preventDefault();
        activate(it);
      });
    });

    // Estado inicial (1a)
    const first = document.querySelector('.item[data-target="1a"]');
    if(first) activate(first);
  </script>
</body>
</html>
